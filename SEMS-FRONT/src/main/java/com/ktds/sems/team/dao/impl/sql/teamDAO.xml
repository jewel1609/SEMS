<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="teamDAO">
	
	<insert id="addNewTeamBBS" parameterType="TeamBBSVO">
		INSERT INTO TEAM_BBS (
									   TEAM_BBS_ID, 
									   TEAM_ID,
									   TITLE, 
									   DESCRIPT,
									   MBR_ID, 
									   CREATED_DATE,
									   <if test="isNotice != null">
								 	   IS_NOTICE
									   </if>
									
					   			  ) 
		VALUES 					( 
									   #{teamBBSId},
									   #{teamId},
									 	#{title},
										#{descript},
										#{memberId},
									 	SYSDATE,
									 	<if test="isNotice != null">
									 	#{isNotice}
									 	</if>
								)
	</insert>
	
	<select id="getNextTeamBBSSeq"  resultType = "_int">
		SELECT	TEAM_BBS_SEQ.NEXTVAL
		FROM	DUAL
	</select>
	
	<select id="getSysDate" resultType = "String">
		SELECT	TO_CHAR(SYSDATE , 'YYYYMMHH')
		FROM	DUAL
	</select>
	
	<select id="getTeamBBSList" resultType="TeamBBSVO">
		SELECT	TEAM_BBS_ID,
	    		TEAM_ID, 
	    		TITLE, 
			    DESCRIPT, 
			    HITS, 
			    LIKE_CNT,
			    DISLIKE_CNT, 
			    MBR_ID, 
			    CREATED_DATE, 
		   		MODIFIED_DATE,
		   		IS_NOTICE
		FROM	(
					SELECT	ROWNUM AS RNUM
							, TEAM_BBS.*
					FROM	(
								SELECT	*
								FROM	TEAM_BBS
								ORDER	BY TEAM_BBS_ID DESC
							) TEAM_BBS
					WHERE	ROWNUM <![CDATA[<=]]> #{endIndex}
				) TEAM_BBS
		WHERE	RNUM >= #{startIndex}		
	</select>
	
	<select  id="getSearchedBBSCount" resultType="_int">
		SELECT	COUNT(*)
		FROM	TEAM_BBS
	</select>	
</mapper>