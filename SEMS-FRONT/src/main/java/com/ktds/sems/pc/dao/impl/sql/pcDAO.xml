<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="PcDAO">
	<select id="getEduListByMember" parameterType="MemberVO" resultType="EducationVO">
		SELECT	E_I.EDU_ID educationId
				, EDU_CTGR educationCategory
				, EDU_TTL educationTitle
				, E_I.MBR_ID memberId 
				, MAX_MBR maxMember
				, EDU_LOC educationLocation
				, EDU_CLCM educationCurriculum
				, EDU_INTR educationIntroduce
				, SRT_DATE startDate
				, END_DATE endDate
				, START_TM startTime
				, END_TM endTime
				, EDU_TP educationType
				, COST cost
		FROM	EDU_INFO E_I, EDU_HTR E_H
		WHERE   E_I.EDU_ID = E_H.EDU_ID
		AND		E_H.MBR_ID = #{id}
		AND     E_H.STAT = 'EDU_JN_C'
	</select>
	
	<insert id="reportProblemPc" parameterType="ReportedPcVO">
	INSERT INTO RPT_PC (
							RPT_PC_ID
							, PC_ID
							, RPT_CTGR
							, RPT_STAT
							, RPT_CMNT
							, MBR_ID
						) 
	VALUES				( 
							#{reportedPcId}
							, #{pcId}
							, #{reportedCategory}
							, 'PC_WT_ING'
							, #{reportedComment}
							, #{memberId}
						)	
	</insert>
	
	<select id="getNowDate" resultType="string">
		SELECT	TO_CHAR(SYSDATE, 'YYYYMMDD')
		FROM	DUAL
	</select>
	
	<select id="getNextReportedPcIdSeq" resultType="_int">
		SELECT 	RPT_PC_ID_SEQ.NEXTVAL
		FROM	DUAL
	</select>
	
	<select id="getUsedPcListByMember" parameterType="MemberVO" resultType="UsedPcVO">
		SELECT  PC.PC_ID pcId
		        , PC.IP ip
		        , EI.EDU_ID educationId
		        , EI.EDU_TTL educationTitle
		        , EI.EDU_LOC educationLocation
		FROM    USED_PC UP
		        , EDU_INFO EI
		        , PC
		WHERE   UP.EDU_ID = EI.EDU_ID
		AND     UP.PC_ID = PC.PC_ID
		AND     UP.MBR_ID=#{id}
	</select>
</mapper>