<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="EducationDAO" >

<select id="nextEduSeq" resultType="_int">
		SELECT	EDU_ID_SEQ.NEXTVAL
		FROM	DUAL
	</select>
	
	<select id="nowDate" resultType="string">
		SELECT	TO_CHAR(SYSDATE, 'YYYYMMDD')
		FROM	DUAL
	</select>
	
	<insert id="insertNewEducation" parameterType="educationVO">

		INSERT INTO SEMS.EDU_INFO (
									   EDU_ID 
									   , EDU_CTGR  
									   , EDU_TTL  
									   , MBR_ID 
									   , MAX_MBR 
									   , EDU_LOC 
									   , EDU_CLCM 
									   , EDU_INTR 
									   , SRT_DATE 
									   , END_DATE 
									   , START_TM 
									   , END_TM 
									   , EDU_TP 
									   , COST 
									) 
		VALUES 					 (	#{educationId}
									 , #{educationCategory}
									 , #{educationTitle}
									 , #{memberId}
									 , #{maxMember}
									 , #{educationLocation}
									 , #{educationCurriculum}
									 , #{educationIntroduce}
									 , #{startDate}
									 , #{endDate }
									 , #{startTime}
									 , #{endTime}
									 , #{educationType}
									 , #{cost}
								)
	</insert>
	<select id="getOneEducation" parameterType="string" resultType="EducationVO">
		SELECT	EDU_ID educationId
				, EDU_CTGR educationCategory
				, EDU_TTL educationTitle
				, MBR_ID memberId
				, MAX_MBR maxMember
				, EDU_LOC educationLocation
				, EDU_CLCM educationCurriculum
				, EDU_INTR educationIntroduce
				, SRT_DATE startDate
				, END_DATE endDate
				, START_TM startTime
				, END_TM endTime
				, EDU_TP educationType
				, COST cost
		FROM	EDU_INFO
		WHERE	EDU_ID = #{educationId}
	</select>
	
	<update id="modifyNewEducation" parameterType="EducationVO">
	 	UPDATE	EDU_INFO
	 	SET		EDU_ID = #{educationId}
	 	<if test="educationCategory != null">
	 			, EDU_CTGR = #{educationCategory}
	 	</if>
	 	<if test="educationTitle != null">
	 			, EDU_TTL = #{educationTitle}
	 	</if>
	 	<if test="memberId != null">
	 			, MBR_ID = #{memberId}
	 	</if>
	 	<if test="maxMember != null">
	 			, MAX_MBR = #{maxMember}
	 	</if>
	 	<if test="educationLocation != null">
	 			, EDU_LOC = #{educationLocation}
	 	</if>
	 	<if test="educationCurriculum != null">
	 			, EDU_CLCM = #{educationCurriculum}
	 	</if>
	 	<if test="educationIntroduce != null">
	 			, EDU_INTR = #{educationIntroduce}
	 	</if>
	 	<if test="startDate != null">
	 			, SRT_DATE = #{startDate}
	 	</if>
	 	<if test="endDate != null">
	 			, END_DATE = #{endDate}
	 	</if>
	 	<if test="startTime != null">
	 			, START_TM = #{startTime}
	 	</if>
	 	<if test="endTime != null">
	 			, END_TM = #{endTime}
	 	</if>
	 	<if test="educationType != null">
	 			, EDU_TP = #{educationType}
	 	</if>
	 	<if test="cost != null">
	 			, COST = #{cost}
	 	</if>
	 	WHERE	EDU_ID = #{educationId}
	</update>

</mapper>
